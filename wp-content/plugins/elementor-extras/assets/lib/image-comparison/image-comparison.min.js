!function(e,i,a,o){e.imageComparison=function(a,o){var n={scope:e(i)},t=this;t.opts={};var s=null,r=(e(i),e(a)),m=!1,d=!1,u=!1;t.init=function(){t.opts=e.extend({},n,o),t._construct()},t._construct=function(){s=t.opts.scope,t.checkPosition(),t.setup(),t.events()},t.checkPosition=function(){s.scrollTop()+.5*s.height()>r.offset().top&&r.addClass("is--visible"),d=!1},t.checkLabel=function(){t.updateLabel(r.find('.ee-image-comparison__label[data-type="modified"]'),r.find(".ee-image-comparison__image"),"left"),t.updateLabel(r.find('.ee-image-comparison__label[data-type="original"]'),r.find(".ee-image-comparison__image"),"right"),u=!1},t.updateLabel=function(e,i,a){"left"==a?e.offset().left+e.outerWidth()<i.offset().left+i.outerWidth()?e.removeClass("is--hidden"):e.addClass("is--hidden"):e.offset().left>i.offset().left+i.outerWidth()?e.removeClass("is--hidden"):e.addClass("is--hidden")},t.setup=function(){t.drags(r.find(".ee-image-comparison__handle"),r.find(".ee-image-comparison__image"),r,r.find('.ee-image-comparison__label[data-type="original"]'),r.find('.ee-image-comparison__label[data-type="modified"]'))},t.events=function(){s.on("scroll",function(){d||(d=!0,i.requestAnimationFrame?requestAnimationFrame(function(){t.checkPosition()}):setTimeout(function(){t.checkPosition()},100))}),s.on("resize",function(){u||(u=!0,i.requestAnimationFrame?requestAnimationFrame(function(){t.checkLabel()}):setTimeout(function(){t.checkLabel()},100))})},t.drags=function(e,a,o,n,s){e.on("mousedown vmousedown",function(r){e.addClass("draggable"),a.addClass("resizable");var d=e.outerWidth(),u=e.offset().left+d-r.pageX,f=o.offset().left,l=o.outerWidth(),c=f-d/2,p=f+l-d/2;e.parents().on("mousemove vmousemove",function(e){m||(m=!0,i.requestAnimationFrame?requestAnimationFrame(function(){t.animateDraggedHandle(e,u,d,c,p,f,l,a,n,s)}):setTimeout(function(){t.animateDraggedHandle(e,u,d,c,p,f,l,a,n,s)},100))}).on("mouseup vmouseup",function(i){e.removeClass("draggable"),a.removeClass("resizable")}),r.preventDefault()}).on("mouseup vmouseup",function(i){e.removeClass("draggable"),a.removeClass("resizable")})},t.animateDraggedHandle=function(i,a,o,n,s,d,u,f,l,c){var p=i.pageX+a-o;p<n?p=n:p>s&&(p=s);var g=100*(p+o/2-d)/u+"%";r.find(".draggable").css("left",g).on("mouseup vmouseup",function(){e(this).removeClass("draggable"),f.removeClass("resizable")}),r.find(".resizable").css("width",g),t.updateLabel(c,f,"left"),t.updateLabel(l,f,"right"),m=!1},t.destroy=function(){r.removeData("imageComparison")},t.init()},e.fn.imageComparison=function(i){return this.each(function(){if(e.fn.imageComparison.destroy=function(){"underfined"!=typeof a&&(e(this).data("imageComparison").destroy(),e(this).removeData("imageComparison"))},void 0===e(this).data("imageComparison")){var a=new e.imageComparison(this,i);e(this).data("imageComparison",a)}})}}(jQuery,window,document);