!function(o){o.videoPlayer=function(e,n){var t={cover:".cover",coverImage:"img",volume:.5,controls:".controls",bar:".controls__bar-wrapper",buttons:".controls__overlay",controlPlay:".controls__play",controlRewind:".controls__rewind",controlFullScreen:".controls__fs",controlTime:".controls__time",controlDuration:".controls__duration",controlProgressBar:".controls__progress",controlProgress:".controls__progress-time",controlVolumeBar:".controls__volume-bar",controlVolume:".controls__volume-bar__amount",controlVolumeIcon:".controls__volume-icon",overlays:".overlay",restartOnPause:!1,playOnViewport:!1,stopOffViewport:!1,endAtLastFrame:!1},l=this;l.opts={};var r=o(document),u=o(e),s=u.find("> video"),a=s.get(0),i=null,c=null,p=null,m=null,d=null,f=null,v=null,y=null,g=null,P=null,w=null,_=null,h=null,V=null,T=null,b=null,C=null,F=null,k=(s.attr("src"),s.is("[autoplay]")),R=!1,q=!1,B=!1,I=!1,M=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,O=!1;l.init=function(){l.opts=o.extend({},t,n),l._construct()},l._construct=function(){c=u.find(l.opts.cover),m=u.find(l.opts.controls),d=u.find(l.opts.bar),f=u.find(l.opts.buttons),y=m.find(l.opts.controlRewind),v=m.find(l.opts.controlPlay),g=m.find(l.opts.controlFullScreen),P=m.find(l.opts.controlDuration),$controlTime=m.find(l.opts.controlTime),_=m.find(l.opts.controlProgress),w=m.find(l.opts.controlProgressBar),V=m.find(l.opts.controlVolume),h=m.find(l.opts.controlVolumeBar),T=m.find(l.opts.controlVolumeIcon),F=l.opts.volume,p=c.find(l.opts.coverImage),i=c.get(0),m.length&&(C=v.get(0),y.length&&(b=y.get(0))),a.load(),l.events(),l.initViewportPlay(),l.initProgressBar(),l.initVolumeBar()},l.events=function(){v.length&&v.on("click",function(){l.maybePlay()}),c.length&&c.on("click",function(){l.maybePlay()}),y.length&&y.on("click",function(o){l.maybeRewind()}),g.length&&g.on("click",function(o){o.preventDefault(),l.fullscreen()}),s.on("loadedmetadata",l.initVideo),s.on("timeupdate",l.updateTime),s.on("canplaythrough",function(){I=!0}),s.on("ended",function(){l.stop(!1)}),M&&s.on("webkitExitFullscreen",l.stop)},l.initVideo=function(){l.updateVolume(0,l.opts.volume),l.updateDuration(),k&&l.maybePlay()},l.initProgressBar=function(){w.length&&(w.on("mousedown",function(o){R=!0,l.updateProgress(o.pageX)}),r.on("mouseup",function(o){R&&(R=!1,l.updateProgress(o.pageX))}),r.on("mousemove",function(o){R&&l.updateProgress(o.pageX)}))},l.initVolumeBar=function(){T.length&&T.click(function(o){if(o.preventDefault(),0==a.volume)0==F&&(F=l.opts.volume),l.updateVolume(0,F);else{var e=a.volume;l.updateVolume(0,0),F=e}}),h.length&&(h.on("mousedown",function(o){q=!0,a.muted=!1,l.updateVolumeIcon(1),l.updateVolume(o.pageX)}),r.on("mouseup",function(o){q&&(q=!1,l.updateVolume(o.pageX))}),r.on("mousemove",function(o){q&&l.updateVolume(o.pageX)}))},l.initViewportPlay=function(){u._appear({force_process:!0}),l.opts.playOnViewport&&(u.on("_appear",function(){B||l.play()}),l.opts.stopOffViewport&&u.on("_disappear",function(){B&&l.stop(!0)}))},l.directPlay=function(){a.play(),O=!0,l.afterPlay(),v.removeClass("nicon-play").addClass("nicon-pause")},l.play=function(){v.removeClass("nicon-play").addClass("nicon-pause"),TweenMax.to(l.opts.overlays,.2,{opacity:0,onComplete:function(){a.play(),l.afterPlay()}})},l.afterPlay=function(){u.removeClass("paused").addClass("playing"),B=!0,TweenMax.set(l.opts.overlays,{opacity:0})},l.stop=function(o){u.removeClass("playing"),v.removeClass("nicon-pause").addClass("nicon-play"),o?(l.opts.restartOnPause||p.hide(),u.addClass("paused"),TweenMax.to(l.opts.overlays,.2,{opacity:1,onComplete:function(){setTimeout(function(){a.pause(),l.opts.restartOnPause&&(a.currentTime=0)},300),B=!1}})):(p.show(),TweenMax.to(l.opts.overlays,.2,{opacity:1,onComplete:function(){l.opts.endAtLastFrame||(a.currentTime=0,a.load()),B=!1}}))},l.maybeRewind=function(){a.currentTime=0,l.play()},l.maybePlay=function(){return M&&!O?l.directPlay():B?l.stop(!0):l.play(),!1},l.fullscreen=function(){a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.webkitEnterFullscreen?a.webkitEnterFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen?a.msRequestFullscreen():alert("Your browser doesn't support fullscreen")},l.updateTime=function(){var o=a.currentTime,e=a.duration,n=100*o/e;_&&_.css("width",n+"%"),$controlTime.length&&$controlTime.html(l.formatTime(o))},l.updateDuration=function(){var o=a.duration;P.length&&P.html(l.formatTime(o))},l.updateProgress=function(o){var e=a.duration,n=o-w.offset().left,t=100*n/w.width();t>100?t=100:t<0&&(t=0),_.css("width",t+"%"),a.currentTime=e*t/100},l.updateVolume=function(o,e){var n;if(e)n=100*e;else var t=o-h.offset().left,n=100*t/h.width();n>100?n=100:n<0&&(n=0),a.volume=n/100,l.updateVolumeIcon(a.volume),V.css("width",n+"%"),e=a.volume},l.updateVolumeIcon=function(o){0==o?T.addClass("nicon-volume-off").removeClass("nicon-volume"):T.addClass("nicon-volume").removeClass("nicon-volume-off")},l.formatTime=function(o){return minutes=Math.floor(o/60),minutes=minutes>=10?minutes:"0"+minutes,o=Math.floor(o%60),o=o>=10?o:"0"+o,minutes+":"+o},l.init()},o.fn.videoPlayer=function(e){return this.each(function(){if(void 0==o(this).data("videoPlayer")){var n=new o.videoPlayer(this,e);o(this).data("videoPlayer",n)}})}}(jQuery);